<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Quadruple Timer v21</title>
<style>
  :root {
    --fg: #fff;
    --border: #23252b;
    --muted: rgba(255, 255, 255, 0.08);
    --muted2: rgba(255, 255, 255, 0.04);
    --nums-pause: #8b5e3c;
  }
  * { box-sizing: border-box; }
  html, body { height: 100%; }
  body {
    margin: 0;
    background: #000;
    color: var(--fg);
    font-family: Inter, system-ui, sans-serif;
    -webkit-tap-highlight-color: transparent;
    overflow-x: hidden;
    transition: background 0.2s ease;
  }
  body.paused { background: #ccc; }
  body.paused .clock, body.paused .phase, body.paused .live-clock { color: var(--nums-pause); }
  .live-clock { position: fixed; top: 8px; left: 8px; font-size: 32px; font-weight: 800; background: var(--muted2); border: 1px solid var(--border); border-radius: 999px; padding: 8px 14px; }
  .lock-overlay {
    position: fixed; inset: 0;
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(2px);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1000;
  }
  .lock-overlay.active { display: flex; }
  .lock-symbol {
    border: 3px solid red;
    border-radius: 12px;
    padding: 16px 24px;
    font-size: 24px;
    font-weight: bold;
    color: red;
    background: rgba(0, 0, 0, 0.6);
  }
  .dim-overlay {
    position: fixed;
    inset: 0;
    background: #000;
    opacity: 0;
    pointer-events: none;
    z-index: 500;
    transition: opacity 0.3s ease;
  }
  .dim-overlay.dim60 { opacity: 0.6; }
  .dim-overlay.dim80 { opacity: 0.8; }
  .dim-overlay.dim100 { opacity: 1.0; }
</style>
</head>
<body>
  <div class="live-clock" id="liveClock">00:00</div>
  <div class="lock-overlay" id="lockOverlay"><div class="lock-symbol">ðŸ”’ Locked</div></div>
  <div class="dim-overlay" id="dimOverlay"></div>

  <script>
    const liveClock = document.getElementById('liveClock');
    const lockOverlay = document.getElementById('lockOverlay');
    const dimOverlay = document.getElementById('dimOverlay');

    function updateClock() {
      const now = new Date();
      liveClock.textContent = `${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}`;
    }
    setInterval(updateClock, 10000);
    updateClock();

    // --- Lock Screen (Pocket Mode)
    let locked = false;
    let tapCount = 0;
    let tapTimer = null;

    function toggleLock() {
      locked = !locked;
      lockOverlay.classList.toggle('active', locked);
      if (locked) {
        showToast('Screen locked');
      } else {
        showToast('Screen unlocked');
      }
    }

    document.addEventListener('pointerdown', e => {
      tapCount++;
      clearTimeout(tapTimer);
      tapTimer = setTimeout(() => {
        if (tapCount >= 2) toggleLock();
        tapCount = 0;
      }, 300);
      if (locked) e.preventDefault();
    }, true);

    // --- Dim Level Setting (for demo)
    let dimLevel = 0; // 0, 60, 80, 100
    function setDim(level) {
      dimOverlay.className = 'dim-overlay';
      if (level === 60) dimOverlay.classList.add('dim60');
      else if (level === 80) dimOverlay.classList.add('dim80');
      else if (level === 100) dimOverlay.classList.add('dim100');
      dimLevel = level;
    }

    // Example: cycle dim level on press D
    document.addEventListener('keydown', e => {
      if (e.key.toLowerCase() === 'd') {
        if (dimLevel === 0) setDim(60);
        else if (dimLevel === 60) setDim(80);
        else if (dimLevel === 80) setDim(100);
        else setDim(0);
      }
    });

    function showToast(msg) {
      console.log(msg); // replace with transient UI element later
    }
  </script>
</body>
</html>
